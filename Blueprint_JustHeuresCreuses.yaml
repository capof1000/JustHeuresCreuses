blueprint:
  name: Gestion intelligente de charge VE + Modes externes
  description: >
    Contrôle la charge d’un véhicule selon plusieurs modes (Auto, Solaire, Heures Creuses,
    Forcé) avec possibilité de changer le mode depuis une entité externe.
  domain: automation

  input:
    mode_selector:
      name: "Sélecteur de mode"
      description: "Input_select permettant de choisir le mode de charge"
      selector:
        entity:
          domain: input_select

    charger_switch:
      name: "Chargeur (switch)"
      selector:
        entity:
          domain: switch

    net_power:
      name: "Puissance nette (W)"
      description: "Production - consommation (valeur positive = surplus)"
      selector:
        entity:
          domain: sensor
          device_class: power

    tesla_soc:
      name: "% de batterie Tesla (%)"
      selector:
        entity:
          domain: sensor
          device_class: battery

    min_soc:
      name: "SOC minimum (%)"
      default: 20
      selector:
        number:
          min: 0
          max: 100
          step: 1

    max_soc:
      name: "SOC maximum (%)"
      default: 80
      selector:
        number:
          min: 0
          max: 100
          step: 1

    surplus_watts:
      name: "Surplus nécessaire pour charger (W)"
      default: 1500
      selector:
        number:
          min: 0
          max: 5000
          step: 100

    off_delay:
      name: "Délai avant arrêt (s)"
      default: 30
      selector:
        number:
          min: 0
          max:
